{"ast":null,"code":"// Copyright (c) Brock Allen & Dominick Baier. All rights reserved.\n// Licensed under the Apache License, Version 2.0. See LICENSE in the project root for license information.\nimport { Log } from './Log.js';\nconst DefaultPopupFeatures = 'location=no,toolbar=no,zoom=no';\nconst DefaultPopupTarget = \"_blank\";\nexport class CordovaPopupWindow {\n  constructor(params) {\n    this._promise = new Promise((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n    this.features = params.popupWindowFeatures || DefaultPopupFeatures;\n    this.target = params.popupWindowTarget || DefaultPopupTarget;\n    this.redirect_uri = params.startUrl;\n    Log.debug(\"CordovaPopupWindow.ctor: redirect_uri: \" + this.redirect_uri);\n  }\n\n  _isInAppBrowserInstalled(cordovaMetadata) {\n    return [\"cordova-plugin-inappbrowser\", \"cordova-plugin-inappbrowser.inappbrowser\", \"org.apache.cordova.inappbrowser\"].some(function (name) {\n      return cordovaMetadata.hasOwnProperty(name);\n    });\n  }\n\n  navigate(params) {\n    if (!params || !params.url) {\n      this._error(\"No url provided\");\n    } else {\n      if (!window.cordova) {\n        return this._error(\"cordova is undefined\");\n      }\n\n      var cordovaMetadata = window.cordova.require(\"cordova/plugin_list\").metadata;\n\n      if (this._isInAppBrowserInstalled(cordovaMetadata) === false) {\n        return this._error(\"InAppBrowser plugin not found\");\n      }\n\n      this._popup = cordova.InAppBrowser.open(params.url, this.target, this.features);\n\n      if (this._popup) {\n        Log.debug(\"CordovaPopupWindow.navigate: popup successfully created\");\n        this._exitCallbackEvent = this._exitCallback.bind(this);\n        this._loadStartCallbackEvent = this._loadStartCallback.bind(this);\n\n        this._popup.addEventListener(\"exit\", this._exitCallbackEvent, false);\n\n        this._popup.addEventListener(\"loadstart\", this._loadStartCallbackEvent, false);\n      } else {\n        this._error(\"Error opening popup window\");\n      }\n    }\n\n    return this.promise;\n  }\n\n  get promise() {\n    return this._promise;\n  }\n\n  _loadStartCallback(event) {\n    if (event.url.indexOf(this.redirect_uri) === 0) {\n      this._success({\n        url: event.url\n      });\n    }\n  }\n\n  _exitCallback(message) {\n    this._error(message);\n  }\n\n  _success(data) {\n    this._cleanup();\n\n    Log.debug(\"CordovaPopupWindow: Successful response from cordova popup window\");\n\n    this._resolve(data);\n  }\n\n  _error(message) {\n    this._cleanup();\n\n    Log.error(message);\n\n    this._reject(new Error(message));\n  }\n\n  close() {\n    this._cleanup();\n  }\n\n  _cleanup() {\n    if (this._popup) {\n      Log.debug(\"CordovaPopupWindow: cleaning up popup\");\n\n      this._popup.removeEventListener(\"exit\", this._exitCallbackEvent, false);\n\n      this._popup.removeEventListener(\"loadstart\", this._loadStartCallbackEvent, false);\n\n      this._popup.close();\n    }\n\n    this._popup = null;\n  }\n\n}","map":{"version":3,"names":["Log","DefaultPopupFeatures","DefaultPopupTarget","CordovaPopupWindow","constructor","params","_promise","Promise","resolve","reject","_resolve","_reject","features","popupWindowFeatures","target","popupWindowTarget","redirect_uri","startUrl","debug","_isInAppBrowserInstalled","cordovaMetadata","some","name","hasOwnProperty","navigate","url","_error","window","cordova","require","metadata","_popup","InAppBrowser","open","_exitCallbackEvent","_exitCallback","bind","_loadStartCallbackEvent","_loadStartCallback","addEventListener","promise","event","indexOf","_success","message","data","_cleanup","error","Error","close","removeEventListener"],"sources":["C:/Users/theoj/Desktop/WebbProject-Yr3-React18/ClientApp/node_modules/oidc-client/src/CordovaPopupWindow.js"],"sourcesContent":["// Copyright (c) Brock Allen & Dominick Baier. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See LICENSE in the project root for license information.\r\n\r\nimport { Log } from './Log.js';\r\n\r\nconst DefaultPopupFeatures = 'location=no,toolbar=no,zoom=no';\r\nconst DefaultPopupTarget = \"_blank\";\r\n\r\nexport class CordovaPopupWindow {\r\n\r\n    constructor(params) {\r\n        this._promise = new Promise((resolve, reject) => {\r\n            this._resolve = resolve;\r\n            this._reject = reject;\r\n        });\r\n\r\n        this.features = params.popupWindowFeatures || DefaultPopupFeatures;\r\n        this.target = params.popupWindowTarget || DefaultPopupTarget;\r\n        \r\n        this.redirect_uri = params.startUrl;\r\n        Log.debug(\"CordovaPopupWindow.ctor: redirect_uri: \" + this.redirect_uri);\r\n    }\r\n\r\n    _isInAppBrowserInstalled(cordovaMetadata) {\r\n        return [\"cordova-plugin-inappbrowser\", \"cordova-plugin-inappbrowser.inappbrowser\", \"org.apache.cordova.inappbrowser\"].some(function (name) {\r\n            return cordovaMetadata.hasOwnProperty(name)\r\n        })\r\n    }\r\n    \r\n    navigate(params) {\r\n        if (!params || !params.url) {\r\n            this._error(\"No url provided\");\r\n        } else {\r\n            if (!window.cordova) {\r\n                return this._error(\"cordova is undefined\")\r\n            }\r\n            \r\n            var cordovaMetadata = window.cordova.require(\"cordova/plugin_list\").metadata;\r\n            if (this._isInAppBrowserInstalled(cordovaMetadata) === false) {\r\n                return this._error(\"InAppBrowser plugin not found\")\r\n            }\r\n            this._popup = cordova.InAppBrowser.open(params.url, this.target, this.features);\r\n            if (this._popup) {\r\n                Log.debug(\"CordovaPopupWindow.navigate: popup successfully created\");\r\n                \r\n                this._exitCallbackEvent = this._exitCallback.bind(this); \r\n                this._loadStartCallbackEvent = this._loadStartCallback.bind(this);\r\n                \r\n                this._popup.addEventListener(\"exit\", this._exitCallbackEvent, false);\r\n                this._popup.addEventListener(\"loadstart\", this._loadStartCallbackEvent, false);\r\n            } else {\r\n                this._error(\"Error opening popup window\");\r\n            }\r\n        }\r\n        return this.promise;\r\n    }\r\n\r\n    get promise() {\r\n        return this._promise;\r\n    }\r\n\r\n    _loadStartCallback(event) {\r\n        if (event.url.indexOf(this.redirect_uri) === 0) {\r\n            this._success({ url: event.url });\r\n        }    \r\n    }\r\n    _exitCallback(message) {\r\n        this._error(message);    \r\n    }\r\n    \r\n    _success(data) {\r\n        this._cleanup();\r\n\r\n        Log.debug(\"CordovaPopupWindow: Successful response from cordova popup window\");\r\n        this._resolve(data);\r\n    }\r\n    _error(message) {\r\n        this._cleanup();\r\n\r\n        Log.error(message);\r\n        this._reject(new Error(message));\r\n    }\r\n\r\n    close() {\r\n        this._cleanup();\r\n    }\r\n\r\n    _cleanup() {\r\n        if (this._popup){\r\n            Log.debug(\"CordovaPopupWindow: cleaning up popup\");\r\n            this._popup.removeEventListener(\"exit\", this._exitCallbackEvent, false);\r\n            this._popup.removeEventListener(\"loadstart\", this._loadStartCallbackEvent, false);\r\n            this._popup.close();\r\n        }\r\n        this._popup = null;\r\n    }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}