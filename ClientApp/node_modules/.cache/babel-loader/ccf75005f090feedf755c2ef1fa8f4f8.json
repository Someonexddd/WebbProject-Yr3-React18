{"ast":null,"code":"// Copyright (c) Brock Allen & Dominick Baier. All rights reserved.\n// Licensed under the Apache License, Version 2.0. See LICENSE in the project root for license information.\nimport { Log } from './Log.js';\nexport class SilentRenewService {\n  constructor(userManager) {\n    this._userManager = userManager;\n  }\n\n  start() {\n    if (!this._callback) {\n      this._callback = this._tokenExpiring.bind(this);\n\n      this._userManager.events.addAccessTokenExpiring(this._callback); // this will trigger loading of the user so the expiring events can be initialized\n\n\n      this._userManager.getUser().then(user => {// deliberate nop\n      }).catch(err => {\n        // catch to suppress errors since we're in a ctor\n        Log.error(\"SilentRenewService.start: Error from getUser:\", err.message);\n      });\n    }\n  }\n\n  stop() {\n    if (this._callback) {\n      this._userManager.events.removeAccessTokenExpiring(this._callback);\n\n      delete this._callback;\n    }\n  }\n\n  _tokenExpiring() {\n    this._userManager.signinSilent().then(user => {\n      Log.debug(\"SilentRenewService._tokenExpiring: Silent token renewal successful\");\n    }, err => {\n      Log.error(\"SilentRenewService._tokenExpiring: Error from signinSilent:\", err.message);\n\n      this._userManager.events._raiseSilentRenewError(err);\n    });\n  }\n\n}","map":{"version":3,"names":["Log","SilentRenewService","constructor","userManager","_userManager","start","_callback","_tokenExpiring","bind","events","addAccessTokenExpiring","getUser","then","user","catch","err","error","message","stop","removeAccessTokenExpiring","signinSilent","debug","_raiseSilentRenewError"],"sources":["C:/Users/theoj/Desktop/WebbProject-Yr3-React18/ClientApp/node_modules/oidc-client/src/SilentRenewService.js"],"sourcesContent":["// Copyright (c) Brock Allen & Dominick Baier. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See LICENSE in the project root for license information.\r\n\r\nimport { Log } from './Log.js';\r\n\r\nexport class SilentRenewService {\r\n\r\n    constructor(userManager) {\r\n        this._userManager = userManager;\r\n    }\r\n\r\n    start() {\r\n        if (!this._callback) {\r\n            this._callback = this._tokenExpiring.bind(this);\r\n            this._userManager.events.addAccessTokenExpiring(this._callback);\r\n\r\n            // this will trigger loading of the user so the expiring events can be initialized\r\n            this._userManager.getUser().then(user=>{\r\n                // deliberate nop\r\n            }).catch(err=>{\r\n                // catch to suppress errors since we're in a ctor\r\n                Log.error(\"SilentRenewService.start: Error from getUser:\", err.message);\r\n            });\r\n        }\r\n    }\r\n\r\n    stop() {\r\n        if (this._callback) {\r\n            this._userManager.events.removeAccessTokenExpiring(this._callback);\r\n            delete this._callback;\r\n        }\r\n    }\r\n\r\n    _tokenExpiring() {\r\n        this._userManager.signinSilent().then(user => {\r\n            Log.debug(\"SilentRenewService._tokenExpiring: Silent token renewal successful\");\r\n        }, err => {\r\n            Log.error(\"SilentRenewService._tokenExpiring: Error from signinSilent:\", err.message);\r\n            this._userManager.events._raiseSilentRenewError(err);\r\n        });\r\n    }\r\n}\r\n"],"mappings":"AAAA;AACA;AAEA,SAASA,GAAT,QAAoB,UAApB;AAEA,OAAO,MAAMC,kBAAN,CAAyB;EAE5BC,WAAW,CAACC,WAAD,EAAc;IACrB,KAAKC,YAAL,GAAoBD,WAApB;EACH;;EAEDE,KAAK,GAAG;IACJ,IAAI,CAAC,KAAKC,SAAV,EAAqB;MACjB,KAAKA,SAAL,GAAiB,KAAKC,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAjB;;MACA,KAAKJ,YAAL,CAAkBK,MAAlB,CAAyBC,sBAAzB,CAAgD,KAAKJ,SAArD,EAFiB,CAIjB;;;MACA,KAAKF,YAAL,CAAkBO,OAAlB,GAA4BC,IAA5B,CAAiCC,IAAI,IAAE,CACnC;MACH,CAFD,EAEGC,KAFH,CAESC,GAAG,IAAE;QACV;QACAf,GAAG,CAACgB,KAAJ,CAAU,+CAAV,EAA2DD,GAAG,CAACE,OAA/D;MACH,CALD;IAMH;EACJ;;EAEDC,IAAI,GAAG;IACH,IAAI,KAAKZ,SAAT,EAAoB;MAChB,KAAKF,YAAL,CAAkBK,MAAlB,CAAyBU,yBAAzB,CAAmD,KAAKb,SAAxD;;MACA,OAAO,KAAKA,SAAZ;IACH;EACJ;;EAEDC,cAAc,GAAG;IACb,KAAKH,YAAL,CAAkBgB,YAAlB,GAAiCR,IAAjC,CAAsCC,IAAI,IAAI;MAC1Cb,GAAG,CAACqB,KAAJ,CAAU,oEAAV;IACH,CAFD,EAEGN,GAAG,IAAI;MACNf,GAAG,CAACgB,KAAJ,CAAU,6DAAV,EAAyED,GAAG,CAACE,OAA7E;;MACA,KAAKb,YAAL,CAAkBK,MAAlB,CAAyBa,sBAAzB,CAAgDP,GAAhD;IACH,CALD;EAMH;;AAnC2B"},"metadata":{},"sourceType":"module"}